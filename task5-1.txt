CREATE DATABASE testdb;
USE testdb;

CREATE TABLE students (
    id INT PRIMARY KEY,
    name VARCHAR(50),
    age INT
);

INSERT INTO students VALUES(1,'Alice',20),(2,'Bob',22),(3,'Charlie',21);




import java.sql.*;

public class UpdatableScrollableDemo {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3306/testdb";
        String user = "root";
        String password = "your_password";

        try {
            Class.forName("com.mysql.cj.jdbc.Driver");
            Connection con = DriverManager.getConnection(url, user, password);

            // Create Scrollable and Updatable ResultSet
            Statement stmt = con.createStatement(
                    ResultSet.TYPE_SCROLL_SENSITIVE,
                    ResultSet.CONCUR_UPDATABLE
            );

            ResultSet rs = stmt.executeQuery("SELECT * FROM students");

            // ---------- Scrollable Demo ----------
            System.out.println("Scrolling forward:");
            while(rs.next()) {
                System.out.println(rs.getInt("id") + " " + rs.getString("name") + " " + rs.getInt("age"));
            }

            System.out.println("\nScrolling backward:");
            while(rs.previous()) {
                System.out.println(rs.getInt("id") + " " + rs.getString("name") + " " + rs.getInt("age"));
            }

            // ---------- Updatable Demo ----------
            System.out.println("\nUpdating Bob's age to 25 using ResultSet");
            rs.beforeFirst(); // move cursor to start
            while(rs.next()) {
                if(rs.getString("name").equals("Bob")) {
                    rs.updateInt("age", 25);
                    rs.updateRow(); // commit the update
                }
            }

            System.out.println("\nInserting a new student using ResultSet");
            rs.moveToInsertRow(); // move cursor to insert row
            rs.updateInt("id", 4);
            rs.updateString("name", "David");
            rs.updateInt("age", 23);
            rs.insertRow(); // insert the row

            // Display updated table
            rs.beforeFirst();
            System.out.println("\nUpdated Student Table:");
            while(rs.next()) {
                System.out.println(rs.getInt("id") + " " + rs.getString("name") + " " + rs.getInt("age"));
            }

            rs.close();
            stmt.close();
            con.close();

        } catch(Exception e) {
            e.printStackTrace();
        }
    }
}