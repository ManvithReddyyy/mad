package com.example.dbdemo;

import java.sql.*;

public class JDBCDemo {
    public static void main(String[] args) {
        String url = "jdbc:mysql://localhost:3308/testdbb";
        String user = "root", pass = "password";

        try (Connection con = DriverManager.getConnection(url, user, pass)) {
            System.out.println("Connected.");

            PreparedStatement ps = con.prepareStatement("INSERT INTO students(name, age) VALUES (?, ?)");
            ps.setString(1, "Charlie");
            ps.setInt(2, 23);
            ps.executeUpdate();

            ps = con.prepareStatement("UPDATE students SET age=? WHERE name=?");
            ps.setInt(1, 24);
            ps.setString(2, "Charlie");
            ps.executeUpdate();

            ps = con.prepareStatement("SELECT * FROM students");
            ResultSet rs = ps.executeQuery();
            while (rs.next())
                System.out.println(rs.getInt("id") + " " + rs.getString("name") + " " + rs.getInt("age"));

            ps = con.prepareStatement("DELETE FROM students WHERE name=?");
            ps.setString(1, "Charlie");
            ps.executeUpdate();

            CallableStatement cs = con.prepareCall("{CALL getStudentById(?)}");
            cs.setInt(1, 1);
            rs = cs.executeQuery();
            while (rs.next())
                System.out.println("From Procedure: " + rs.getString("name"));

        } catch (Exception e) {
            e.printStackTrace();
        }
    }
}
